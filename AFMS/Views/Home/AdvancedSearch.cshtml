@{
    ViewData["Title"] = "Advanced Search";
}

<link rel="stylesheet" href="~/css/dashboard.css" />
<link rel="stylesheet" href="~/css/advanced-search.css" />

<div class="app-container">
    <!-- Left Sidebar -->
    <aside class="sidebar">
        <!-- Sidebar Header -->
        <div class="sidebar-header">
            <div class="app-logo">
                <img src="~/images/AFMS logo.png" alt="AFMS Logo" style="width: 100%; height: 100%; object-fit: contain;" />
            </div>
            <div class="app-info">
                <h1 class="app-title">Airport Manager</h1>
                <span class="app-version">v1.0</span>
            </div>
            <button class="close-btn">‚úï</button>
        </div>

        <!-- Navigation Menu -->
        <nav class="sidebar-nav">
            <a href="@Url.Action("Index", "Home")" class="nav-item">
                <span class="nav-label">Dashboard</span>
            </a>
            <a href="#" class="nav-item">
                <span class="nav-label">Add Flight</span>
            </a>
            <a href="#" class="nav-item">
                <span class="nav-label">Flight Details</span>
            </a>
            <a href="@Url.Action("AdvancedSearch", "Home")" class="nav-item active">
                <span class="nav-label">Advanced Search</span>
            </a>
            <a href="#" class="nav-item">
                <span class="nav-label">Data Import</span>
            </a>
        </nav>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
            <div class="user-info">
                <span class="user-label">Logged in as</span>
                <span class="user-name">Admin User</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="top-bar-spacer"></div>
            <div class="top-bar-right">
                <div class="current-time">
                    <span class="time-label">Current Time</span>
                    <span class="time-value" id="currentTime">20:44:22</span>
                </div>
                <div class="user-avatar">
                    <button class="avatar-btn">A</button>
                </div>
            </div>
        </header>

        <!-- Advanced Search Content -->
        <div class="dashboard-container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Advanced Flight Search</h1>
                <p class="page-subtitle">Search and filter flight records</p>
            </div>

            <!-- Search Form -->
            <div class="search-form-container">
                <form class="search-form">
                    <!-- Row 1: Flight Number, Airline, Origin Airport -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="flightNumber" class="form-label">Flight Number</label>
                            <input type="text" id="flightNumber" class="form-input" placeholder="e.g., UA 1234" />
                        </div>
                        <div class="form-group">
                            <label for="airline" class="form-label">Airline</label>
                            <select id="airline" class="form-input">
                                <option value="">All airlines</option>
                                <option value="united">United Airlines</option>
                                <option value="american">American Airlines</option>
                                <option value="delta">Delta Airlines</option>
                                <option value="southwest">Southwest</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="originAirport" class="form-label">Origin Airport</label>
                            <input type="text" id="originAirport" class="form-input" list="airportOptions" placeholder="e.g., JFK" />
                        </div>
                    </div>

                    <!-- Row 2: Destination Airport, Date From, Date To -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="destinationAirport" class="form-label">Destination Airport</label>
                            <input type="text" id="destinationAirport" class="form-input" list="airportOptions" placeholder="e.g., LAX" />
                        </div>
                        <div class="form-group">
                            <label for="dateFrom" class="form-label">Date From</label>
                            <input type="date" id="dateFrom" class="form-input" placeholder="dd/mm/yyyy" />
                        </div>
                        <div class="form-group">
                            <label for="dateTo" class="form-label">Date To</label>
                            <input type="date" id="dateTo" class="form-input" placeholder="dd/mm/yyyy" />
                        </div>
                    </div>

                    <!-- Temporary Fallback Airport Options (replace with API later) -->
                    <datalist id="airportOptions">
                        <option value="JFK">John F. Kennedy (JFK)</option>
                        <option value="LAX">Los Angeles (LAX)</option>
                        <option value="ORD">Chicago O'Hare (ORD)</option>
                        <option value="DFW">Dallas/Fort Worth (DFW)</option>
                        <option value="DEN">Denver (DEN)</option>
                        <option value="ATL">Atlanta (ATL)</option>
                        <option value="SFO">San Francisco (SFO)</option>
                        <option value="SEA">Seattle (SEA)</option>
                    </datalist>

                    <!-- Flight Status (single select) -->
                    <div class="form-group-full">
                        <label class="form-label">
                            <span class="filter-icon">üîΩ</span> Flight Status
                        </label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="radio" id="statusAny" name="flightStatus" class="checkbox-input" checked />
                                <span class="checkbox-text">Any</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" id="statusOnTime" name="flightStatus" class="checkbox-input" />
                                <span class="checkbox-text">On Time</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" id="statusBoarding" name="flightStatus" class="checkbox-input" />
                                <span class="checkbox-text">Boarding</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" id="statusDelayed" name="flightStatus" class="checkbox-input" />
                                <span class="checkbox-text">Delayed</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" id="statusDeparted" name="flightStatus" class="checkbox-input" />
                                <span class="checkbox-text">Departed</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="radio" id="statusCancelled" name="flightStatus" class="checkbox-input" />
                                <span class="checkbox-text">Cancelled</span>
                            </label>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span class="btn-icon">üîç</span>
                            Search Flights
                        </button>
                        <button type="button" class="btn btn-secondary" id="clearFiltersBtn">
                            Clear Filters
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            document.getElementById('currentTime').textContent = timeString;
        }
        
        updateTime();
        setInterval(updateTime, 1000);

        // Temporary fallback behavior (remove when API is wired)
        const clearBtn = document.getElementById('clearFiltersBtn');
        const form = document.querySelector('.search-form');

        if (clearBtn && form) {
            clearBtn.addEventListener('click', () => {
                form.reset();
                const anyStatus = document.getElementById('statusAny');
                if (anyStatus) {
                    anyStatus.checked = true;
                }
            });
        }
    </script>
}
